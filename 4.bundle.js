(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{14:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return r}));var o=s(3),i=s(1);class r extends o.q{constructor(){super({posts:[],loaded:!1,itemsCount:0,error:!1}),this.first=!1,this.page=1}template(){return Object(i.b)("q-scafold",null,Object(i.b)("q-appbar",{shadow:!0},Object(i.b)("q-toolbarbutton",{onClick:()=>{o.j.instances.main.open()},slot:"start"},Object(i.b)("q-icon",{icon:"bars"})),Object(i.b)("span",null,"Inicio "+this.props.itemsCount)),Object(i.b)("q-content",{padding:!0},Object(i.b)("q-refresher",{ref:"fresh",onRefresh:()=>this.loadActual()},Object(i.b)("q-spinner",null)),this.props.error&&Object(i.b)("div",null,"Datos no disponibles..."),Object(i.b)("q-spinner",{style:this.props.loaded||this.props.error?"display: none;":""}),Object(i.b)("q-virtuallist",{itemheight:"382",items:this.props.posts,renderitem:this.rendItem.bind(this)}),Object(i.b)("q-infinitescrol",{ref:"iScrol",onLoadmore:()=>this.loadMore()},Object(i.b)("q-spinner",null))))}styles(){return super.styles()+""}rendItem(t,e){return Object(i.b)("q-card",null,Object(i.b)("div",{slot:"header"},Object(i.b)("div",{class:"text small"},Object(i.b)("b",null,t.title))),Object(i.b)("q-image",{style:"height: 215px;",className:"mainimage",slot:"img",srcimg:t.backdrop_path?"http://image.tmdb.org/t/p/w500"+t.backdrop_path:"https://via.placeholder.com/500x281"},Object(i.b)("q-icon",{style:"color: rgb(var(--q-material-primary-rgb));",icon:"spinner",spin:!0})),Object(i.b)("div",{slot:"leftFooter"},Object(i.b)("q-button",{onClick:e=>this.goPost(t,e),mode:"outline"},"Leer mÃ¡s")))}loadMore(){setTimeout(()=>{fetch("https://api.themoviedb.org/3/movie/popular?api_key=785e1bfa35690f914c6c1c83a043d807&language=es-ES&page="+this.page).then(t=>t.json()).then(t=>{this.transaction(()=>{this.props.posts=[...this.props.posts,...t.results],this.props.itemsCount=this.props.posts.length}),this.page++,this.refs.iScrol.complete()})},2e3)}loadActual(){setTimeout(()=>{this.page=1,fetch("https://api.themoviedb.org/3/movie/popular?api_key=785e1bfa35690f914c6c1c83a043d807&language=es-ES&page="+this.page).then(t=>t.json()).then(t=>{this.transaction(()=>{this.props.posts=t.results,this.props.loaded=!0,this.props.error=!1,this.props.itemsCount=this.props.posts.length}),this.page++,this.refs.fresh.complete()})},1e3)}loadInitial(){fetch("https://api.themoviedb.org/3/movie/popular?api_key=785e1bfa35690f914c6c1c83a043d807&language=es-ES&page="+this.page).then(t=>t.json()).then(t=>{this.transaction(()=>{this.props.posts=t.results,this.props.loaded=!0,this.props.itemsCount=this.props.posts.length}),this.page++,this.refs.fresh.complete()}).catch(t=>{this.props.error=!0})}componentLoaded(){setTimeout(()=>{this.loadInitial()},1e3)}goPost(t,e){o.A.instances.main.pushName("detail",Object.assign(Object.assign({},t),{startPos:e.clientY-230}))}}r.tagName="q-homepage"}}]);